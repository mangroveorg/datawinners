{% extends 'project/tab_navigation.html' %}
{% load i18n %}
{% block page_title %} {% trans "Questionnaires - Overview"%} {% endblock %}

{% load dw_tabs %}
{% block navigation %}
{% activetab "tab_nav" "overview" %}
{{ block.super }}
{% endblock %}

{% block body %}
{% activetab "main_nav" "questionnaires" %}
{{ block.super }}
{% endblock %}
{% load waffle_tags %}

{% block page_scss %}
    {{ block.super }}
    <link href="/media/css/scss/section_new_overview.css" rel="stylesheet" />
    <link href="/media/css/scss/section_new_create_project.css" rel="stylesheet" />
    <link href="/media/css/scss/section_questionnaire_preview.css" rel="stylesheet" />
	  
    {% flag "green_theme"%}
    	<!-- Demo for feature toggle based theme change. If we have real requirement for custom themes, 
    			we need to refactor the way styles are organized -->
	    <link href="/media/css/scss/section_application_green_theme.css" rel="stylesheet"/>
	{% else %}
	    <link href="/media/css/scss/section_application.css" rel="stylesheet"/>
	{% endflag %}

    {% if GOOGLE_MAPS_ENABLED %}
        <link rel="stylesheet" href="/media/javascript/OpenLayers-2.13.1/theme/default/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/media/css/scss/section_map.css" media="screen">
    {% endif %}
{% endblock %}

{% block page_js %}
  {{ block.super }}
  {% if GOOGLE_MAPS_ENABLED %}
    <script type="text/javascript" src="/media/javascript/OpenLayers-2.13.1/OpenLayers.js"></script>
    <script>
        OpenLayers.ImgPath = '/media/javascript/OpenLayers-2.13.1/img/';
    </script>
    <script type="text/javascript" src="/media/javascript/entity_mapping.js"></script>
    <script type="text/javascript">
        var entity_types = {{ project.entity_type|safe }};
        $(document).ready(function() {
            $( "#how_to" ).accordion({ collapsible: true, active: 0 });
            init_map();
        });
    </script>
  {% endif %}
    <script type="text/javascript">
        DW.help_url = "https://www.datawinners.com/{% trans 'wp_language' %}/find-answers-app/category/ov/?template=help";
        var isSmartPhoneUpgradeInfoFlagPresent = '{{ show_sp_upgrade_info }}';
    </script>
    <script type="text/javascript" src="/media/javascript/project/overview_index.js"></script>

{% endblock %}


{% block content %}
    <span id="project_id" style="display: none;">{{ project.id }}</span>
    {% if entity_types_with_no_registered_entities %}
       {% for type in entity_types_with_no_registered_entities %}
            <div id="add_link" class="information_box clear-left">
                    {% blocktrans %}You have not registered a {{ type }} yet. Making submission via Smartphone will not be possible.{% endblocktrans %}
                    {% trans "Register a" %} <a target="_blank" href="{% url create_subject type %}?web_view=True">{{ type }}</a>.
            </div>
       {% endfor %}
        <br/>
    {% endif %}

    <div class="span-18 box">
        <!--Success Message div-->
        {% include 'project/success_message.html' %}
        <div class="my_sub">
            <p><b>
                <div>
                    <label>
                        {{ unique_id_header_text }} {% trans "Data Senders"%} <img src="/media/images/help_icon.png" class="help_icon">
                    </label>
                    <div class="tooltip">
                        <p>
                            {% trans 'If you have registered your Data Senders and/or Identification Numbers with GPS Coordinates, they will be displayed on the map below.' %}
                        </p>
                    </div>
                </div>
            </b></p>
        </div>

        <!--Map div-->
        {% if GOOGLE_MAPS_ENABLED %}
            {% include 'entity_map.html'  %}
        {% endif %}
        <!--Questionnaire & DS div-->
        <div class="clear_both_width_100" id="questionnaire_and_DS">
            {% include 'project/questionnaire_and_DS.html'%}
        </div>

    </div>

    <div id="smartphone_upgrade_section" class="none">
        {% trans "For advanced Questionnaire features to work on Android Devices tell your Data Senders to download "%}
        <a href="https://play.google.com/store/apps/details?id=org.hni.datawinners.android.collect&hl=en" target="_blank" class="dialog-link">{%trans "the latest version of the DataWinners app."%}</a>
        <div class="gotitbutton">
            <a class="button yes_button" id="close_accordion_link">{% trans "OK, Got It" %}</a>
        </div>
    </div>

{% endblock %}